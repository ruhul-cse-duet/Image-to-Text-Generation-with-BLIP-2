<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image to Text Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <!-- Animated Background -->
  <div class="bg-gradient"></div>
  
  <!-- Navigation -->
  <nav class="navbar navbar-dark px-4 shadow-lg">
    <a class="navbar-brand fw-bold d-flex align-items-center" href="#">
      <i class="fas fa-image me-2"></i> google/t5gemma-2-1b-1b model for image-to-text Generator apps
    </a>
    <div class="nav-actions">
      <button class="btn btn-sm btn-outline-light" id="themeToggle">
        <i class="fas fa-moon"></i> <span class="d-none d-md-inline">Theme</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container py-4 py-md-5">
    <!-- Alert Container -->
    <div id="alertContainer" class="mb-3"></div>

    <div class="row g-4">
      <!-- LEFT SIDE - Input Section -->
      <div class="col-lg-5">
        
        <!-- Image Upload & Prompt Card -->
        <div class="card glass p-4 animate__animated animate__fadeInLeft">
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-image text-primary me-2"></i>
            <h5 class="card-title mb-0">Image to Text</h5>
          </div>
          <p class="text-muted small mb-3">
            <i class="fas fa-info-circle"></i> Upload an image and add a prompt to generate descriptive text
          </p>

          <!-- File Input -->
          <div class="mb-3">
            <label class="form-label d-flex align-items-center">
              <i class="fas fa-upload me-2"></i> Choose Image
            </label>
            <input 
              class="form-control form-control-sm" 
              type="file" 
              id="imageInput" 
              accept="image/png,image/jpeg,image/jpg,image/gif,image/webp,image/bmp"
            >
            <div class="form-text">Supported: PNG, JPEG, GIF, WebP, BMP (Max: 16MB)</div>
          </div>

          <!-- Image Preview -->
          <div id="previewWrap" class="mb-3 d-none">
            <div class="position-relative">
              <img id="preview" src="" alt="preview" class="img-fluid rounded shadow-sm preview-image" />
              <button class="btn btn-sm btn-danger position-absolute top-0 end-0 m-2" id="removeImage">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div id="imageInfo" class="small text-muted mt-2"></div>
          </div>

          <!-- Prompt Input -->
          <div class="mb-3">
            <label class="form-label d-flex align-items-center">
              <i class="fas fa-pen me-2"></i> Enter Prompt
            </label>
            <textarea 
              id="imgPrompt" 
              class="form-control" 
              rows="3" 
              placeholder="E.g., 'What is shown in this image?', 'Describe this scene in detail'..."
              maxlength="500"
            ></textarea>
            <div class="form-text">
              <span id="charCount">0</span>/500 characters
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex gap-2 flex-wrap">
            <button id="imgGenBtn" class="btn btn-primary flex-fill">
              <i class="fas fa-magic me-2"></i> Generate
            </button>
            <button id="clearImgBtn" class="btn btn-outline-light">
              <i class="fas fa-eraser"></i>
            </button>
          </div>

          <!-- Loading Spinner -->
          <div id="imgLoading" class="text-center py-3 d-none">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Generating...</span>
            </div>
            <p class="text-muted small mt-2">Analyzing image and generating text...</p>
          </div>

          <!-- Result Display -->
          <div id="imgResult" class="mt-3"></div>
        </div>


        <!-- Text Generation Card (Optional) -->
        <div class="card glass p-4 mt-4 animate__animated animate__fadeInLeft animate__delay-1s">
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-keyboard text-success me-2"></i>
            <h5 class="card-title mb-0">Text Generation</h5>
          </div>
          <p class="text-muted small mb-3">
            <i class="fas fa-info-circle"></i> Generate text from a prompt without an image
          </p>
          
          <div class="mb-3">
            <label class="form-label d-flex align-items-center">
              <i class="fas fa-comment-dots me-2"></i> Enter Prompt
            </label>
            <textarea 
              id="prompt" 
              class="form-control" 
              rows="3" 
              placeholder="E.g., 'Describe a beautiful sunset', 'Tell me about artificial intelligence'..."
              maxlength="500"
            ></textarea>
            <div class="form-text">
              <span id="textCharCount">0</span>/500 characters
            </div>
          </div>
          
          <div class="d-flex gap-2 flex-wrap">
            <button id="genBtn" class="btn btn-success flex-fill">
              <i class="fas fa-lightbulb me-2"></i> Generate
            </button>
            <button id="clearTxtBtn" class="btn btn-outline-light">
              <i class="fas fa-eraser"></i>
            </button>
          </div>

          <div id="txtLoading" class="text-center py-3 d-none">
            <div class="spinner-border text-success" role="status">
              <span class="visually-hidden">Generating...</span>
            </div>
            <p class="text-muted small mt-2">Generating text...</p>
          </div>

          <div id="txtResult" class="mt-3"></div>
        </div>

      </div>

      <!-- RIGHT SIDE - Results Section -->
      <div class="col-lg-7">
        <div class="card glass p-4 animate__animated animate__fadeInRight">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div class="d-flex align-items-center">
              <i class="fas fa-list me-2 text-info"></i>
              <h5 class="card-title mb-0">Generation History</h5>
            </div>
            <button id="clearAllResults" class="btn btn-sm btn-outline-danger d-none">
              <i class="fas fa-trash"></i> Clear All
            </button>
          </div>
          
          <div id="resultsList" class="results-container">
            <div class="empty text-center text-muted py-5">
              <i class="fas fa-inbox fa-3x mb-3 opacity-50"></i>
              <p class="lead">No results yet</p>
              <p class="small">Upload an image or enter a prompt to get started</p>
            </div>
          </div>
        </div>


        <!-- Info Card -->
        <div class="card glass p-4 mt-4 animate__animated animate__fadeInRight animate__delay-1s">
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-info-circle me-2 text-warning"></i>
            <h5 class="card-title mb-0">About google/t5gemma-2-1b-1b</h5>
          </div>
          <p class="small text-muted mb-2">
            <strong>google/t5gemma-2-1b-1b</strong> (Bootstrapping Language-Image Pre-training) is a state-of-the-art vision-language model
            that can generate natural language descriptions from images.
          </p>
          <ul class="small text-muted mb-0">
            <li>Model: <code>google/t5gemma-2-1b-1b</code></li>
            <li>Supports various image understanding tasks</li>
            <li>Generates coherent and contextual descriptions</li>
            <li>Powered by Hugging Face Transformers</li>
          </ul>
          
          <div class="mt-3 d-flex gap-2">
            <button id="checkHealth" class="btn btn-sm btn-outline-info">
              <i class="fas fa-heartbeat"></i> Check Status
            </button>
          </div>
          
          <div id="healthStatus" class="mt-2"></div>
        </div>

        <!-- Tips Card -->
        <div class="card glass p-4 mt-4 animate__animated animate__fadeInRight animate__delay-2s">
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-lightbulb me-2 text-warning"></i>
            <h5 class="card-title mb-0">Tips for Best Results</h5>
          </div>
          <ul class="small text-muted mb-0">
            <li>Use clear, high-quality images</li>
            <li>Be specific in your prompts</li>
            <li>Try different prompt styles (questions, descriptions, instructions)</li>
            <li>Images should be less than 4096x4096 pixels</li>
            <li>Supported formats: PNG, JPEG, GIF, WebP, BMP</li>
          </ul>
        </div>

      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer text-center text-muted py-4 mt-5">
    <small>
      <i class="fas fa-code"></i> Built with google/t5gemma-2-1b-1b & Flask |
      <i class="fas fa-heart text-danger"></i> Made with AI
    </small>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
